{
    "_meta": {
        "description": "Command definitions for v5 firmware generator",
        "version": "5.0.0",
        "note": "Complete v5 command set with delimited text format"
    },
    "commands": [
        {
            "name": "ANALOG",
            "displayName": "Analog Read",
            "description": "Reads analog value from specified pin (A0-A5)",
            "category": "sensors",
            "commandFormat": "delimited",
            "syntax": "ANALOG|{pin}",
            "example": "ANALOG|A0_14",
            "response": {
                "success": "{\"ok\":1,\"value\":512}",
                "error": "{\"ok\":0,\"error\":\"ERR_INVALID_PIN\"}"
            },
            "parameters": [
                {
                    "name": "pin",
                    "type": "string",
                    "required": true,
                    "description": "Analog pin (A0-A5)",
                    "validation": "^A[0-5]$",
                    "example": "A0"
                }
            ],
            "memoryFootprint": {
                "flash": 200,
                "sram": 50
            },
            "requiredLibraries": [],
            "sensorFamily": "ANALOG",
            "primitives": [
                "READ_ANALOG"
            ],
            "templateFile": {
                "serial": "analog.ino",
                "wifi": "analog.ino"
            },
            "isActive": true
        },
        {
            "name": "DHT_READ",
            "displayName": "DHT Temperature & Humidity",
            "description": "Reads temperature and humidity from DHT11/DHT22 sensors",
            "category": "sensors",
            "commandFormat": "delimited",
            "syntax": "DHT_READ|{pin}",
            "example": "DHT_READ|D4_4",
            "response": {
                "success": "{\"ok\":1,\"temp\":22.5,\"humidity\":65.3}",
                "error": "{\"ok\":0,\"error\":\"ERR_SENSOR_READ_FAILED\"}"
            },
            "parameters": [
                {
                    "name": "pin",
                    "type": "string",
                    "required": true,
                    "description": "Digital pin (D2-D13)",
                    "validation": "^D([2-9]|1[0-3])$",
                    "example": "D4"
                }
            ],
            "memoryFootprint": {
                "flash": 800,
                "sram": 100
            },
            "requiredLibraries": [],
            "sensorFamily": "DHT",
            "primitives": [
                "SINGLE_WIRE_PULSE"
            ],
            "templateFile": {
                "serial": "dht_read.ino",
                "wifi": "dht_read.ino"
            },
            "isActive": true
        },
        {
            "name": "ONEWIRE_READ_TEMP",
            "displayName": "OneWire Temperature",
            "description": "Reads temperature from DS18B20 OneWire sensors",
            "category": "sensors",
            "commandFormat": "delimited",
            "syntax": "ONEWIRE_READ_TEMP|{pin}",
            "example": "ONEWIRE_READ_TEMP|D5_5",
            "response": {
                "success": "{\"ok\":1,\"temp\":18.75}",
                "error": "{\"ok\":0,\"error\":\"ERR_SENSOR_NOT_FOUND\"}"
            },
            "parameters": [
                {
                    "name": "pin",
                    "type": "string",
                    "required": true,
                    "description": "Digital pin (D2-D13)",
                    "validation": "^D([2-9]|1[0-3])$",
                    "example": "D5"
                }
            ],
            "memoryFootprint": {
                "flash": 1500,
                "sram": 200
            },
            "requiredLibraries": [
                "OneWire",
                "DallasTemperature"
            ],
            "sensorFamily": "ONEWIRE",
            "primitives": [
                "SINGLE_WIRE_ONEWIRE"
            ],
            "templateFile": {
                "serial": "onewire_read_temp.ino",
                "wifi": "onewire_read_temp.ino"
            },
            "isActive": true
        },
        {
            "name": "RELAY_SET",
            "displayName": "Relay Control",
            "description": "Controls relay state (ON/OFF)",
            "category": "actuators",
            "commandFormat": "delimited",
            "syntax": "RELAY_SET|{pin}|{state}",
            "example": "RELAY_SET|D7_7|1",
            "response": {
                "success": "{\"ok\":1,\"pin\":\"D7\",\"state\":1}",
                "error": "{\"ok\":0,\"error\":\"ERR_INVALID_PIN\"}"
            },
            "parameters": [
                {
                    "name": "pin",
                    "type": "string",
                    "required": true,
                    "description": "Digital pin (D2-D13)",
                    "validation": "^D([2-9]|1[0-3])$",
                    "example": "D7"
                },
                {
                    "name": "state",
                    "type": "integer",
                    "required": true,
                    "description": "Relay state (0=OFF, 1=ON)",
                    "validation": "^[01]$",
                    "example": "1"
                }
            ],
            "memoryFootprint": {
                "flash": 250,
                "sram": 60
            },
            "requiredLibraries": [],
            "sensorFamily": "RELAY",
            "primitives": [
                "WRITE_DIGITAL"
            ],
            "templateFile": {
                "serial": "relay_set.ino",
                "wifi": "relay_set.ino"
            },
            "isActive": true
        },
        {
            "name": "DIGITAL_READ",
            "displayName": "Digital Read",
            "description": "Reads digital pin state (HIGH/LOW)",
            "category": "sensors",
            "commandFormat": "delimited",
            "syntax": "DIGITAL_READ|{pin}",
            "example": "DIGITAL_READ|D3_3",
            "response": {
                "success": "{\"ok\":1,\"pin\":\"D3\",\"state\":1}",
                "error": "{\"ok\":0,\"error\":\"ERR_INVALID_PIN\"}"
            },
            "parameters": [
                {
                    "name": "pin",
                    "type": "string",
                    "required": true,
                    "description": "Digital pin (D2-D13)",
                    "validation": "^D([2-9]|1[0-3])$",
                    "example": "D3"
                }
            ],
            "memoryFootprint": {
                "flash": 180,
                "sram": 40
            },
            "requiredLibraries": [],
            "sensorFamily": "DIGITAL",
            "primitives": [
                "READ_DIGITAL"
            ],
            "templateFile": {
                "serial": "digital_read.ino",
                "wifi": "digital_read.ino"
            },
            "isActive": true
        },
        {
            "name": "DIGITAL_WRITE",
            "displayName": "Digital Write",
            "description": "Sets digital pin state (HIGH/LOW)",
            "category": "actuators",
            "commandFormat": "delimited",
            "syntax": "DIGITAL_WRITE|{pin}|{state}",
            "example": "DIGITAL_WRITE|D8_8|1",
            "response": {
                "success": "{\"ok\":1,\"pin\":\"D8\",\"state\":1}",
                "error": "{\"ok\":0,\"error\":\"ERR_INVALID_PIN\"}"
            },
            "parameters": [
                {
                    "name": "pin",
                    "type": "string",
                    "required": true,
                    "description": "Digital pin (D2-D13)",
                    "validation": "^D([2-9]|1[0-3])$",
                    "example": "D8"
                },
                {
                    "name": "state",
                    "type": "integer",
                    "required": true,
                    "description": "Pin state (0=LOW, 1=HIGH)",
                    "validation": "^[01]$",
                    "example": "1"
                }
            ],
            "memoryFootprint": {
                "flash": 200,
                "sram": 50
            },
            "requiredLibraries": [],
            "sensorFamily": "DIGITAL",
            "primitives": [
                "WRITE_DIGITAL"
            ],
            "templateFile": {
                "serial": "digital_write.ino",
                "wifi": "digital_write.ino"
            },
            "isActive": true
        },
        {
            "name": "PWM_WRITE",
            "displayName": "PWM Write",
            "description": "Sets PWM duty cycle on pin (0-255)",
            "category": "actuators",
            "commandFormat": "delimited",
            "syntax": "PWM_WRITE|{pin}|{value}",
            "example": "PWM_WRITE|D9_9|128",
            "response": {
                "success": "{\"ok\":1,\"pin\":\"D9\",\"value\":128}",
                "error": "{\"ok\":0,\"error\":\"ERR_INVALID_PIN\"}"
            },
            "parameters": [
                {
                    "name": "pin",
                    "type": "string",
                    "required": true,
                    "description": "PWM pin (D3, D5, D6, D9, D10, D11)",
                    "validation": "^D(3|5|6|9|10|11)$",
                    "example": "D9"
                },
                {
                    "name": "value",
                    "type": "integer",
                    "required": true,
                    "description": "PWM value (0-255)",
                    "validation": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$",
                    "example": "128"
                }
            ],
            "memoryFootprint": {
                "flash": 220,
                "sram": 55
            },
            "requiredLibraries": [],
            "sensorFamily": "PWM",
            "primitives": [
                "WRITE_PWM"
            ],
            "templateFile": {
                "serial": "pwm_write.ino",
                "wifi": "pwm_write.ino"
            },
            "isActive": true
        },
        {
            "name": "SERVO_WRITE",
            "displayName": "Servo Control",
            "description": "Sets servo position (0-180 degrees)",
            "category": "actuators",
            "commandFormat": "delimited",
            "syntax": "SERVO_WRITE|{pin}|{angle}",
            "example": "SERVO_WRITE|D9_9|90",
            "response": {
                "success": "{\"ok\":1,\"pin\":\"D9\",\"angle\":90}",
                "error": "{\"ok\":0,\"error\":\"ERR_INVALID_PIN\"}"
            },
            "parameters": [
                {
                    "name": "pin",
                    "type": "string",
                    "required": true,
                    "description": "PWM pin (D3, D5, D6, D9, D10, D11)",
                    "validation": "^D(3|5|6|9|10|11)$",
                    "example": "D9"
                },
                {
                    "name": "angle",
                    "type": "integer",
                    "required": true,
                    "description": "Servo angle (0-180)",
                    "validation": "^([0-9]|[1-9][0-9]|1[0-7][0-9]|180)$",
                    "example": "90"
                }
            ],
            "memoryFootprint": {
                "flash": 800,
                "sram": 120
            },
            "requiredLibraries": [
                "Servo"
            ],
            "sensorFamily": "SERVO",
            "primitives": [
                "WRITE_SERVO"
            ],
            "templateFile": {
                "serial": "servo_write.ino",
                "wifi": "servo_write.ino"
            },
            "isActive": true
        },
        {
            "name": "MODBUS_RTU_READ",
            "displayName": "Modbus RTU Read",
            "description": "Reads Modbus RTU registers from industrial sensors",
            "category": "sensors",
            "commandFormat": "hybrid",
            "syntax": "MODBUS_RTU_READ|{rx_pin}|{tx_pin}|{json_params}",
            "example": "MODBUS_RTU_READ|D2_2|D3_3|{\"addr\":1,\"func\":3,\"reg\":0,\"count\":2}",
            "response": {
                "success": "{\"ok\":1,\"registers\":[1234,5678]}",
                "error": "{\"ok\":0,\"error\":\"ERR_MODBUS_TIMEOUT\"}"
            },
            "parameters": [
                {
                    "name": "addr",
                    "type": "integer",
                    "required": true,
                    "description": "Modbus device address (1-247)",
                    "validation": "^([1-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-7])$",
                    "example": "1"
                },
                {
                    "name": "func",
                    "type": "integer",
                    "required": true,
                    "description": "Function code (3=Read Holding, 4=Read Input)",
                    "validation": "^[34]$",
                    "example": "3"
                },
                {
                    "name": "reg",
                    "type": "integer",
                    "required": true,
                    "description": "Starting register address",
                    "validation": "^[0-9]+$",
                    "example": "0"
                },
                {
                    "name": "count",
                    "type": "integer",
                    "required": true,
                    "description": "Number of registers to read",
                    "validation": "^[1-9][0-9]?$",
                    "example": "2"
                }
            ],
            "memoryFootprint": {
                "flash": 2500,
                "sram": 300
            },
            "requiredLibraries": [
                "SoftwareSerial"
            ],
            "sensorFamily": "MODBUS",
            "primitives": [
                "MODBUS_RTU"
            ],
            "templateFile": {
                "serial": "modbus_rtu_read.ino",
                "wifi": "modbus_rtu_read.ino"
            },
            "isActive": true
        },
        {
            "name": "I2C_READ",
            "displayName": "I2C Read",
            "description": "Reads data from I2C devices",
            "category": "sensors",
            "commandFormat": "delimited",
            "syntax": "I2C_READ|{address}|{bytes}",
            "example": "I2C_READ|0x76|2",
            "response": {
                "success": "{\"ok\":1,\"address\":\"0x76\",\"data\":[123,45]}",
                "error": "{\"ok\":0,\"error\":\"ERR_I2C_TIMEOUT\"}"
            },
            "parameters": [
                {
                    "name": "address",
                    "type": "string",
                    "required": true,
                    "description": "I2C device address (hex: 0x76 or decimal: 118)",
                    "validation": "^(0x[0-9A-Fa-f]{1,2}|[0-9]{1,3})$",
                    "example": "0x76"
                },
                {
                    "name": "bytes",
                    "type": "integer",
                    "required": true,
                    "description": "Number of bytes to read (1-32)",
                    "validation": "^([1-9]|[12][0-9]|3[0-2])$",
                    "example": "2"
                }
            ],
            "memoryFootprint": {
                "flash": 600,
                "sram": 100
            },
            "requiredLibraries": [
                "Wire"
            ],
            "sensorFamily": "I2C",
            "primitives": [
                "I2C_READ"
            ],
            "templateFile": {
                "serial": "i2c_read.ino",
                "wifi": "i2c_read.ino"
            },
            "isActive": true
        },
        {
            "name": "UART_READ_DISTANCE",
            "displayName": "UART Distance Sensor",
            "description": "Reads distance from UART ultrasonic sensors (A02YYUW, JSN-SR04T)",
            "category": "sensors",
            "commandFormat": "delimited",
            "syntax": "UART_READ_DISTANCE|{rx_pin}|{tx_pin}",
            "example": "UART_READ_DISTANCE|D10_10|D11_11",
            "response": {
                "success": "{\"ok\":1,\"distance\":245}",
                "error": "{\"ok\":0,\"error\":\"ERR_SENSOR_TIMEOUT\"}"
            },
            "parameters": [
                {
                    "name": "rx_pin",
                    "type": "string",
                    "required": true,
                    "description": "RX pin for SoftwareSerial (D2-D13)",
                    "validation": "^D([2-9]|1[0-3])$",
                    "example": "D10"
                },
                {
                    "name": "tx_pin",
                    "type": "string",
                    "required": true,
                    "description": "TX pin for SoftwareSerial (D2-D13)",
                    "validation": "^D([2-9]|1[0-3])$",
                    "example": "D11"
                }
            ],
            "memoryFootprint": {
                "flash": 1200,
                "sram": 150
            },
            "requiredLibraries": [
                "SoftwareSerial"
            ],
            "sensorFamily": "UART",
            "primitives": [
                "UART_READ"
            ],
            "templateFile": {
                "serial": "uart_read_distance.ino",
                "wifi": "uart_read_distance.ino"
            },
            "isActive": true
        }
    ]
}