{
    "id": "ota_update",
    "name": "Over-The-Air Updates",
    "description": "Enable wireless firmware updates",
    "category": "system",
    "compatible_transports": [
        "wifi",
        "ethernet"
    ],
    "compatible_architectures": [
        "esp8266",
        "esp32"
    ],
    "parameters": [
        {
            "name": "hostname",
            "type": "string",
            "default": "hydro-device",
            "label": "Device Hostname"
        },
        {
            "name": "ota_password",
            "type": "password",
            "default": "admin",
            "label": "OTA Password"
        }
    ],
    "code": {
        "includes": {
            "esp8266": "#include <ArduinoOTA.h>",
            "esp32": "#include <ArduinoOTA.h>",
            "renesas_uno": ""
        },
        "setup": {
            "esp8266": [
                "ArduinoOTA.setHostname(\"{{hostname}}\");",
                "ArduinoOTA.setPassword(\"{{ota_password}}\");",
                "ArduinoOTA.begin();"
            ],
            "esp32": [
                "ArduinoOTA.setHostname(\"{{hostname}}\");",
                "ArduinoOTA.setPassword(\"{{ota_password}}\");",
                "ArduinoOTA.begin();"
            ],
            "renesas_uno": "// OTA not supported on Renesas yet"
        },
        "loop": {
            "esp8266": "ArduinoOTA.handle();",
            "esp32": "ArduinoOTA.handle();",
            "renesas_uno": ""
        }
    }
}