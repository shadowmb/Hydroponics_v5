{
    "id": "valve_motorized_generic",
    "name": "Motorized Ball Valve (Generic)",
    "description": "Motorized ball valve with position control via timing (0-100%). Supports dosing based on flow rate when open.",
    "category": "ACTUATOR",
    "measurements": {
        "position": {
            "rawUnit": "%",
            "baseUnit": "%"
        }
    },
    "roles": {
        "positioning": {
            "label": "Valve Positioning",
            "description": "Control valve opening percentage (0-100%).",
            "source": "position",
            "defaultStrategy": "duration_position",
            "strategies": [
                "duration_position"
            ],
            "units": [
                "%"
            ]
        },
        "dosing": {
            "label": "Flow Dosing",
            "description": "Dose specific volume when the valve is open.",
            "source": "position",
            "defaultStrategy": "volumetric_flow",
            "strategies": [
                "volumetric_flow"
            ],
            "units": [
                "ml",
                "l",
                "gal"
            ]
        }
    },
    "supportedStrategies": [
        "duration_position",
        "volumetric_flow"
    ],
    "capabilities": [
        "DIGITAL_WRITE"
    ],
    "hardwareLimits": {
        "min": 0,
        "max": 100000,
        "unit": "s"
    },
    "sampling": {
        "count": 1,
        "delayMs": 0
    },
    "commands": {
        "OPEN": {
            "hardwareCmd": "DIGITAL_WRITE",
            "params": {
                "pin": "open_pin",
                "state": 1
            },
            "description": "Start opening the valve"
        },
        "CLOSE": {
            "hardwareCmd": "DIGITAL_WRITE",
            "params": {
                "pin": "close_pin",
                "state": 1
            },
            "description": "Start closing the valve"
        },
        "STOP": {
            "hardwareCmd": "DIGITAL_WRITE",
            "params": {
                "state": 0
            },
            "description": "Stop movement (Turn off both relays)"
        }
    },
    "pins": [
        {
            "name": "Open Relay",
            "type": "DIGITAL_OUT"
        },
        {
            "name": "Close Relay",
            "type": "DIGITAL_OUT"
        }
    ],
    "uiConfig": {
        "icon": "activity",
        "units": [
            "ms",
            "s",
            "min",
            "h"
        ],
        "tags": [
            "Valve",
            "Water"
        ],
        "category": "Water",
        "capabilities": {
            "duration_position": {
                "label": "Position Control",
                "icon": "activity",
                "tooltip": "Precise flow control by timing the valve opening/closing."
            }
        }
    },
    "initialState": {
        "position": 0,
        "state": "closed"
    }
}